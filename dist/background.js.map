{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/webext-redux/lib/constants/index.js","webpack:///./node_modules/webext-redux/lib/serialization.js","webpack:///./node_modules/webext-redux/lib/strategies/constants.js","webpack:///./node_modules/webext-redux/lib/util.js","webpack:///./node_modules/symbol-observable/es/ponyfill.js","webpack:///./node_modules/webext-redux/lib/index.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./node_modules/webext-redux/lib/store/Store.js","webpack:///./node_modules/lodash.assignin/index.js","webpack:///./node_modules/webext-redux/lib/strategies/shallowDiff/patch.js","webpack:///./node_modules/webext-redux/lib/store/applyMiddleware.js","webpack:///./node_modules/webext-redux/lib/wrap-store/wrapStore.js","webpack:///./node_modules/webext-redux/lib/strategies/shallowDiff/diff.js","webpack:///./node_modules/webext-redux/lib/alias/alias.js","webpack:///./node_modules/symbol-observable/es/index.js","webpack:///./src/background/reducers/index.js","webpack:///./src/background/reducers/domContent.js","webpack:///./src/background/index.js","webpack:///./node_modules/redux/es/redux.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","DEFAULT_PORT_NAME","PATCH_STATE_TYPE","STATE_TYPE","DISPATCH_TYPE","_objectSpread","target","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_defineProperty","obj","configurable","writable","withSerializer","withDeserializer","noop","payload","transformPayload","message","transformer","undefined","deserializeListener","listener","deserializer","shouldDeserialize","_len","args","Array","_key","apply","_len2","_key2","addListenerFn","serializer","sendMessageFn","messageArgIndex","_len3","_key3","Error","DIFF_STATUS_ARRAY_UPDATED","DIFF_STATUS_KEYS_UPDATED","DIFF_STATUS_REMOVED","DIFF_STATUS_UPDATED","getBrowserAPI","api","global","chrome","browser","error","symbolObservablePonyfill","root","result","observable","_Store","default","_applyMiddleware","_wrapStore","_alias","_interopRequireDefault","originalModule","webpackPolyfill","children","_lodash","_constants","_serialization","_patch","_util","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","defaultOpts","portName","state","extensionId","patchStrategy","_default","Store","_this","_ref","_ref$portName","_ref$state","_ref$extensionId","_ref$serializer","_ref$deserializer","_ref$patchStrategy","readyResolved","readyPromise","Promise","resolve","readyResolve","browserAPI","port","runtime","connect","safetyHandler","safetyMessage","onMessage","addListener","serializedPortListener","_this$port$onMessage","serializedMessageSender","_this$browserAPI$runt","sendMessage","listeners","type","replaceState","patchState","dispatch","protoProps","staticProps","cb","then","_this2","push","difference","data","_this3","reject","resp","bgErr","action","removeListener","reIsUint","func","thisArg","objectProto","objectToString","toString","propertyIsEnumerable","nativeMax","Math","max","arrayLikeKeys","inherited","isArray","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","iteratee","index","baseTimes","String","skipIndexes","isIndex","assignValue","objValue","eq","baseKeysIn","isObject","nativeKeysIn","Ctor","proto","isProto","constructor","test","other","isLength","tag","isFunction","assigner","start","assignIn","customizer","newValue","copyObject","keysIn","sources","guard","isIterateeCall","array","otherArgs","newObj","assign","change","Reflect","deleteProperty","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","iterator","from","_iterableToArray","_nonIterableSpread","compose","funcs","arg","reduce","a","b","store","middlewares","_dispatch","middlewareAPI","getState","map","middleware","_diff","dispatchResponder","dispatchResult","send","res","catch","err","console","diffStrategy","_ref$dispatchResponde","_ref$diffStrategy","dispatchResponse","request","sender","sendResponse","_sender","connectState","serializedMessagePoster","postMessage","prevState","unsubscribe","subscribe","diff","onDisconnect","withPayloadDeserializer","_browserAPI$runtime$o","onMessageExternal","_browserAPI$runtime$o2","warn","onConnect","onConnectExternal","tabs","query","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","tab","id","lastError","return","oldObj","aliases","alias","self","combineReducers","domContent","log","createStore","rootReducer","wrapStore","onInstalled","declarativeContent","onPageChanged","removeRules","addRules","conditions","PageStateMatcher","pageUrl","hostContains","actions","ShowPageAction","randomString","random","substring","split","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","getPrototypeOf","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","isSubscribed","indexOf","splice","replaceReducer","nextReducer","outerSubscribe","observer","observeState","getUndefinedStateErrorMessage","actionType","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","assertReducerShape","hasChanged","nextState","_i","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","bindActionCreators","actionCreators","boundActionCreators"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 69);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DEFAULT_PORT_NAME = exports.PATCH_STATE_TYPE = exports.STATE_TYPE = exports.DISPATCH_TYPE = void 0;\n// Message type used for dispatch events\n// from the Proxy Stores to background\nvar DISPATCH_TYPE = 'chromex.dispatch'; // Message type for state update events from\n// background to Proxy Stores\n\nexports.DISPATCH_TYPE = DISPATCH_TYPE;\nvar STATE_TYPE = 'chromex.state'; // Message type for state patch events from\n// background to Proxy Stores\n\nexports.STATE_TYPE = STATE_TYPE;\nvar PATCH_STATE_TYPE = 'chromex.patch_state'; // The default name for the port communication via\n// react-chrome-redux\n\nexports.PATCH_STATE_TYPE = PATCH_STATE_TYPE;\nvar DEFAULT_PORT_NAME = \"chromex.port_name\";\nexports.DEFAULT_PORT_NAME = DEFAULT_PORT_NAME;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withSerializer = exports.withDeserializer = exports.noop = void 0;\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar noop = function noop(payload) {\n  return payload;\n};\n\nexports.noop = noop;\n\nvar transformPayload = function transformPayload(message) {\n  var transformer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  return _objectSpread({}, message, message.payload ? {\n    payload: transformer(message.payload)\n  } : {});\n};\n\nvar deserializeListener = function deserializeListener(listener) {\n  var deserializer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  var shouldDeserialize = arguments.length > 2 ? arguments[2] : undefined;\n\n  // If a shouldDeserialize function is passed, return a function that uses it\n  // to check if any given message payload should be deserialized\n  if (shouldDeserialize) {\n    return function (message) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (shouldDeserialize.apply(void 0, [message].concat(args))) {\n        return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n      }\n\n      return listener.apply(void 0, [message].concat(args));\n    };\n  } // Otherwise, return a function that tries to deserialize on every message\n\n\n  return function (message) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    return listener.apply(void 0, [transformPayload(message, deserializer)].concat(args));\n  };\n};\n/**\r\n * A function returned from withDeserializer that, when called, wraps addListenerFn with the\r\n * deserializer passed to withDeserializer.\r\n * @name AddListenerDeserializer\r\n * @function\r\n * @param {Function} addListenerFn The add listener function to wrap.\r\n * @returns {DeserializedAddListener}\r\n */\n\n/**\r\n * A wrapped add listener function that registers the given listener.\r\n * @name DeserializedAddListener\r\n * @function\r\n * @param {Function} listener The listener function to register. It should expect the (optionally)\r\n * deserialized message as its first argument.\r\n * @param {Function} [shouldDeserialize] A function that takes the arguments passed to the listener\r\n * and returns whether the message payload should be deserialized. Not all messages (notably, messages\r\n * this listener doesn't care about) should be attempted to be deserialized.\r\n */\n\n/**\r\n * Given a deserializer, returns an AddListenerDeserializer function that that takes an add listener\r\n * function and returns a DeserializedAddListener that automatically deserializes message payloads.\r\n * Each message listener is expected to take the message as its first argument.\r\n * @param {Function} deserializer A function that deserializes a message payload.\r\n * @returns {AddListenerDeserializer}\r\n * Example Usage:\r\n *   const withJsonDeserializer = withDeserializer(payload => JSON.parse(payload));\r\n *   const deserializedChromeListener = withJsonDeserializer(chrome.runtime.onMessage.addListener);\r\n *   const shouldDeserialize = (message) => message.type === 'DESERIALIZE_ME';\r\n *   deserializedChromeListener(message => console.log(\"Payload:\", message.payload), shouldDeserialize);\r\n *   chrome.runtime.sendMessage(\"{'type:'DESERIALIZE_ME','payload':{'prop':4}}\");\r\n *   //Payload: { prop: 4 };\r\n *   chrome.runtime.sendMessage(\"{'payload':{'prop':4}}\");\r\n *   //Payload: \"{'prop':4}\";\r\n */\n\n\nvar withDeserializer = function withDeserializer() {\n  var deserializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (addListenerFn) {\n    return function (listener, shouldDeserialize) {\n      return addListenerFn(deserializeListener(listener, deserializer, shouldDeserialize));\n    };\n  };\n};\n/**\r\n * Given a serializer, returns a function that takes a message sending\r\n * function as its sole argument and returns a wrapped message sender that\r\n * automaticaly serializes message payloads. The message sender\r\n * is expected to take the message as its first argument, unless messageArgIndex\r\n * is nonzero, in which case it is expected in the position specified by messageArgIndex.\r\n * @param {Function} serializer A function that serializes a message payload\r\n * Example Usage:\r\n *   const withJsonSerializer = withSerializer(payload => JSON.stringify(payload))\r\n *   const serializedChromeSender = withJsonSerializer(chrome.runtime.sendMessage)\r\n *   chrome.runtime.addListener(message => console.log(\"Payload:\", message.payload))\r\n *   serializedChromeSender({ payload: { prop: 4 }})\r\n *   //Payload: \"{'prop':4}\"\r\n */\n\n\nexports.withDeserializer = withDeserializer;\n\nvar withSerializer = function withSerializer() {\n  var serializer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n  return function (sendMessageFn) {\n    var messageArgIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      if (args.length <= messageArgIndex) {\n        throw new Error(\"Message in request could not be serialized. \" + \"Expected message in position \".concat(messageArgIndex, \" but only received \").concat(args.length, \" args.\"));\n      }\n\n      args[messageArgIndex] = transformPayload(args[messageArgIndex], serializer);\n      return sendMessageFn.apply(void 0, args);\n    };\n  };\n};\n\nexports.withSerializer = withSerializer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DIFF_STATUS_ARRAY_UPDATED = exports.DIFF_STATUS_KEYS_UPDATED = exports.DIFF_STATUS_REMOVED = exports.DIFF_STATUS_UPDATED = void 0;\n// The `change` value for updated or inserted fields resulting from shallow diff\nvar DIFF_STATUS_UPDATED = 'updated'; // The `change` value for removed fields resulting from shallow diff\n\nexports.DIFF_STATUS_UPDATED = DIFF_STATUS_UPDATED;\nvar DIFF_STATUS_REMOVED = 'removed';\nexports.DIFF_STATUS_REMOVED = DIFF_STATUS_REMOVED;\nvar DIFF_STATUS_KEYS_UPDATED = 'updated_keys';\nexports.DIFF_STATUS_KEYS_UPDATED = DIFF_STATUS_KEYS_UPDATED;\nvar DIFF_STATUS_ARRAY_UPDATED = 'updated_array';\nexports.DIFF_STATUS_ARRAY_UPDATED = DIFF_STATUS_ARRAY_UPDATED;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBrowserAPI = getBrowserAPI;\n\n/**\r\n * Looks for a global browser api, first checking the chrome namespace and then\r\n * checking the browser namespace. If no appropriate namespace is present, this\r\n * function will throw an error.\r\n */\nfunction getBrowserAPI() {\n  var api;\n\n  try {\n    api = global.chrome || global.browser || browser;\n  } catch (error) {\n    api = browser;\n  }\n\n  if (!api) {\n    throw new Error(\"Browser API is not present\");\n  }\n\n  return api;\n}","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Store\", {\n  enumerable: true,\n  get: function get() {\n    return _Store.default;\n  }\n});\nObject.defineProperty(exports, \"applyMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _applyMiddleware.default;\n  }\n});\nObject.defineProperty(exports, \"wrapStore\", {\n  enumerable: true,\n  get: function get() {\n    return _wrapStore.default;\n  }\n});\nObject.defineProperty(exports, \"alias\", {\n  enumerable: true,\n  get: function get() {\n    return _alias.default;\n  }\n});\n\nvar _Store = _interopRequireDefault(require(\"./store/Store\"));\n\nvar _applyMiddleware = _interopRequireDefault(require(\"./store/applyMiddleware\"));\n\nvar _wrapStore = _interopRequireDefault(require(\"./wrap-store/wrapStore\"));\n\nvar _alias = _interopRequireDefault(require(\"./alias/alias\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.assignin\"));\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _patch = _interopRequireDefault(require(\"../strategies/shallowDiff/patch\"));\n\nvar _util = require(\"../util\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar backgroundErrPrefix = '\\nLooks like there is an error in the background page. ' + 'You might want to inspect your background page for more details.\\n';\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  state: {},\n  extensionId: null,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  patchStrategy: _patch.default\n};\n\nvar Store =\n/*#__PURE__*/\nfunction () {\n  /**\r\n   * Creates a new Proxy store\r\n   * @param  {object} options An object of form {portName, state, extensionId, serializer, deserializer, diffStrategy}, where `portName` is a required string and defines the name of the port for state transition changes, `state` is the initial state of this store (default `{}`) `extensionId` is the extension id as defined by browserAPI when extension is loaded (default `''`), `serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and patchStrategy is one of the included patching strategies (default is shallow diff) or a custom patching function.\r\n   */\n  function Store() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOpts,\n        _ref$portName = _ref.portName,\n        portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n        _ref$state = _ref.state,\n        state = _ref$state === void 0 ? defaultOpts.state : _ref$state,\n        _ref$extensionId = _ref.extensionId,\n        extensionId = _ref$extensionId === void 0 ? defaultOpts.extensionId : _ref$extensionId,\n        _ref$serializer = _ref.serializer,\n        serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n        _ref$deserializer = _ref.deserializer,\n        deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n        _ref$patchStrategy = _ref.patchStrategy,\n        patchStrategy = _ref$patchStrategy === void 0 ? defaultOpts.patchStrategy : _ref$patchStrategy;\n\n    _classCallCheck(this, Store);\n\n    if (!portName) {\n      throw new Error('portName is required in options');\n    }\n\n    if (typeof serializer !== 'function') {\n      throw new Error('serializer must be a function');\n    }\n\n    if (typeof deserializer !== 'function') {\n      throw new Error('deserializer must be a function');\n    }\n\n    if (typeof patchStrategy !== 'function') {\n      throw new Error('patchStrategy must be one of the included patching strategies or a custom patching function');\n    }\n\n    this.portName = portName;\n    this.readyResolved = false;\n    this.readyPromise = new Promise(function (resolve) {\n      return _this.readyResolve = resolve;\n    });\n    this.browserAPI = (0, _util.getBrowserAPI)();\n    this.extensionId = extensionId; // keep the extensionId as an instance variable\n\n    this.port = this.browserAPI.runtime.connect(this.extensionId, {\n      name: portName\n    });\n    this.safetyHandler = this.safetyHandler.bind(this);\n    this.safetyMessage = this.browserAPI.runtime.onMessage.addListener(this.safetyHandler);\n    this.serializedPortListener = (0, _serialization.withDeserializer)(deserializer)(function () {\n      var _this$port$onMessage;\n\n      return (_this$port$onMessage = _this.port.onMessage).addListener.apply(_this$port$onMessage, arguments);\n    });\n    this.serializedMessageSender = (0, _serialization.withSerializer)(serializer)(function () {\n      var _this$browserAPI$runt;\n\n      return (_this$browserAPI$runt = _this.browserAPI.runtime).sendMessage.apply(_this$browserAPI$runt, arguments);\n    }, 1);\n    this.listeners = [];\n    this.state = state;\n    this.patchStrategy = patchStrategy; // Don't use shouldDeserialize here, since no one else should be using this port\n\n    this.serializedPortListener(function (message) {\n      switch (message.type) {\n        case _constants.STATE_TYPE:\n          _this.replaceState(message.payload);\n\n          if (!_this.readyResolved) {\n            _this.readyResolved = true;\n\n            _this.readyResolve();\n          }\n\n          break;\n\n        case _constants.PATCH_STATE_TYPE:\n          _this.patchState(message.payload);\n\n          break;\n\n        default: // do nothing\n\n      }\n    });\n    this.dispatch = this.dispatch.bind(this); // add this context to dispatch\n  }\n  /**\r\n  * Returns a promise that resolves when the store is ready. Optionally a callback may be passed in instead.\r\n  * @param [function] callback An optional callback that may be passed in and will fire when the store is ready.\r\n  * @return {object} promise A promise that resolves when the store has established a connection with the background page.\r\n  */\n\n\n  _createClass(Store, [{\n    key: \"ready\",\n    value: function ready() {\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (cb !== null) {\n        return this.readyPromise.then(cb);\n      }\n\n      return this.readyPromise;\n    }\n    /**\r\n     * Subscribes a listener function for all state changes\r\n     * @param  {function} listener A listener function to be called when store state changes\r\n     * @return {function}          An unsubscribe function which can be called to remove the listener from state updates\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(listener) {\n      var _this2 = this;\n\n      this.listeners.push(listener);\n      return function () {\n        _this2.listeners = _this2.listeners.filter(function (l) {\n          return l !== listener;\n        });\n      };\n    }\n    /**\r\n     * Replaces the state for only the keys in the updated state. Notifies all listeners of state change.\r\n     * @param {object} state the new (partial) redux state\r\n     */\n\n  }, {\n    key: \"patchState\",\n    value: function patchState(difference) {\n      this.state = this.patchStrategy(this.state, difference);\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\r\n     * Replace the current state with a new state. Notifies all listeners of state change.\r\n     * @param  {object} state The new state for the store\r\n     */\n\n  }, {\n    key: \"replaceState\",\n    value: function replaceState(state) {\n      this.state = state;\n      this.listeners.forEach(function (l) {\n        return l();\n      });\n    }\n    /**\r\n     * Get the current state of the store\r\n     * @return {object} the current store state\r\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * Stub function to stay consistent with Redux Store API. No-op.\r\n     */\n\n  }, {\n    key: \"replaceReducer\",\n    value: function replaceReducer() {\n      return;\n    }\n    /**\r\n     * Dispatch an action to the background using messaging passing\r\n     * @param  {object} data The action data to dispatch\r\n     * @return {Promise}     Promise that will resolve/reject based on the action response from the background\r\n     */\n\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(data) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3.serializedMessageSender(_this3.extensionId, {\n          type: _constants.DISPATCH_TYPE,\n          portName: _this3.portName,\n          payload: data\n        }, null, function (resp) {\n          var error = resp.error,\n              value = resp.value;\n\n          if (error) {\n            var bgErr = new Error(\"\".concat(backgroundErrPrefix).concat(error));\n            reject((0, _lodash.default)(bgErr, error));\n          } else {\n            resolve(value && value.payload);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"safetyHandler\",\n    value: function safetyHandler(message) {\n      if (message.action === 'storeReady') {\n        // Remove Saftey Listener\n        this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler); // Resolve if readyPromise has not been resolved.\n\n        if (!this.readyResolved) {\n          this.readyResolved = true;\n          this.readyResolve();\n        }\n      }\n    }\n  }]);\n\n  return Store;\n}();\n\nvar _default = Store;\nexports.default = _default;","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assign\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = assignIn;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _constants = require(\"../constants\");\n\nfunction _default(obj, difference) {\n  var newObj = Object.assign({}, obj);\n  difference.forEach(function (_ref) {\n    var change = _ref.change,\n        key = _ref.key,\n        value = _ref.value;\n\n    switch (change) {\n      case _constants.DIFF_STATUS_UPDATED:\n        newObj[key] = value;\n        break;\n\n      case _constants.DIFF_STATUS_REMOVED:\n        Reflect.deleteProperty(newObj, key);\n        break;\n\n      default: // do nothing\n\n    }\n  });\n  return newObj;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = applyMiddleware;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n// Function taken from redux source\n// https://github.com/reactjs/redux/blob/master/src/compose.js\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n} // Based on redux implementation of applyMiddleware to support all standard\n// redux middlewares\n\n\nfunction applyMiddleware(store) {\n  for (var _len2 = arguments.length, middlewares = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    middlewares[_key2 - 1] = arguments[_key2];\n  }\n\n  var _dispatch = function dispatch() {\n    throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n  };\n\n  var middlewareAPI = {\n    getState: store.getState.bind(store),\n    dispatch: function dispatch() {\n      return _dispatch.apply(void 0, arguments);\n    }\n  };\n  middlewares = (middlewares || []).map(function (middleware) {\n    return middleware(middlewareAPI);\n  });\n  _dispatch = compose.apply(void 0, _toConsumableArray(middlewares))(store.dispatch);\n  store.dispatch = _dispatch;\n  return store;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _serialization = require(\"../serialization\");\n\nvar _util = require(\"../util\");\n\nvar _diff = _interopRequireDefault(require(\"../strategies/shallowDiff/diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Responder for promisified results\r\n * @param  {object} dispatchResult The result from `store.dispatch()`\r\n * @param  {function} send         The function used to respond to original message\r\n * @return {undefined}\r\n */\nvar promiseResponder = function promiseResponder(dispatchResult, send) {\n  Promise.resolve(dispatchResult).then(function (res) {\n    send({\n      error: null,\n      value: res\n    });\n  }).catch(function (err) {\n    console.error('error dispatching result:', err);\n    send({\n      error: err.message,\n      value: null\n    });\n  });\n};\n\nvar defaultOpts = {\n  portName: _constants.DEFAULT_PORT_NAME,\n  dispatchResponder: promiseResponder,\n  serializer: _serialization.noop,\n  deserializer: _serialization.noop,\n  diffStrategy: _diff.default\n};\n/**\r\n * Wraps a Redux store so that proxy stores can connect to it.\r\n * @param {Object} store A Redux store\r\n * @param {Object} options An object of form {portName, dispatchResponder, serializer, deserializer}, where `portName` is a required string and defines the name of the port for state transition changes, `dispatchResponder` is a function that takes the result of a store dispatch and optionally implements custom logic for responding to the original dispatch message,`serializer` is a function to serialize outgoing message payloads (default is passthrough), `deserializer` is a function to deserialize incoming message payloads (default is passthrough), and diffStrategy is one of the included diffing strategies (default is shallow diff) or a custom diffing function.\r\n */\n\nvar _default = function _default(store) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOpts,\n      _ref$portName = _ref.portName,\n      portName = _ref$portName === void 0 ? defaultOpts.portName : _ref$portName,\n      _ref$dispatchResponde = _ref.dispatchResponder,\n      dispatchResponder = _ref$dispatchResponde === void 0 ? defaultOpts.dispatchResponder : _ref$dispatchResponde,\n      _ref$serializer = _ref.serializer,\n      serializer = _ref$serializer === void 0 ? defaultOpts.serializer : _ref$serializer,\n      _ref$deserializer = _ref.deserializer,\n      deserializer = _ref$deserializer === void 0 ? defaultOpts.deserializer : _ref$deserializer,\n      _ref$diffStrategy = _ref.diffStrategy,\n      diffStrategy = _ref$diffStrategy === void 0 ? defaultOpts.diffStrategy : _ref$diffStrategy;\n\n  if (!portName) {\n    throw new Error('portName is required in options');\n  }\n\n  if (typeof serializer !== 'function') {\n    throw new Error('serializer must be a function');\n  }\n\n  if (typeof deserializer !== 'function') {\n    throw new Error('deserializer must be a function');\n  }\n\n  if (typeof diffStrategy !== 'function') {\n    throw new Error('diffStrategy must be one of the included diffing strategies or a custom diff function');\n  }\n\n  var browserAPI = (0, _util.getBrowserAPI)();\n  /**\r\n   * Respond to dispatches from UI components\r\n   */\n\n  var dispatchResponse = function dispatchResponse(request, sender, sendResponse) {\n    if (request.type === _constants.DISPATCH_TYPE && request.portName === portName) {\n      var action = Object.assign({}, request.payload, {\n        _sender: sender\n      });\n      var dispatchResult = null;\n\n      try {\n        dispatchResult = store.dispatch(action);\n      } catch (e) {\n        dispatchResult = Promise.reject(e.message);\n        console.error(e);\n      }\n\n      dispatchResponder(dispatchResult, sendResponse);\n      return true;\n    }\n  };\n  /**\r\n  * Setup for state updates\r\n  */\n\n\n  var connectState = function connectState(port) {\n    if (port.name !== portName) {\n      return;\n    }\n\n    var serializedMessagePoster = (0, _serialization.withSerializer)(serializer)(function () {\n      return port.postMessage.apply(port, arguments);\n    });\n    var prevState = store.getState();\n\n    var patchState = function patchState() {\n      var state = store.getState();\n      var diff = diffStrategy(prevState, state);\n\n      if (diff.length) {\n        prevState = state;\n        serializedMessagePoster({\n          type: _constants.PATCH_STATE_TYPE,\n          payload: diff\n        });\n      }\n    }; // Send patched state down connected port on every redux store state change\n\n\n    var unsubscribe = store.subscribe(patchState); // when the port disconnects, unsubscribe the sendState listener\n\n    port.onDisconnect.addListener(unsubscribe); // Send store's initial state through port\n\n    serializedMessagePoster({\n      type: _constants.STATE_TYPE,\n      payload: prevState\n    });\n  };\n\n  var withPayloadDeserializer = (0, _serialization.withDeserializer)(deserializer);\n\n  var shouldDeserialize = function shouldDeserialize(request) {\n    return request.type === _constants.DISPATCH_TYPE && request.portName === portName;\n  };\n  /**\r\n   * Setup action handler\r\n   */\n\n\n  withPayloadDeserializer(function () {\n    var _browserAPI$runtime$o;\n\n    return (_browserAPI$runtime$o = browserAPI.runtime.onMessage).addListener.apply(_browserAPI$runtime$o, arguments);\n  })(dispatchResponse, shouldDeserialize);\n  /**\r\n   * Setup external action handler\r\n   */\n\n  if (browserAPI.runtime.onMessageExternal) {\n    withPayloadDeserializer(function () {\n      var _browserAPI$runtime$o2;\n\n      return (_browserAPI$runtime$o2 = browserAPI.runtime.onMessageExternal).addListener.apply(_browserAPI$runtime$o2, arguments);\n    })(dispatchResponse, shouldDeserialize);\n  } else {\n    console.warn('runtime.onMessageExternal is not supported');\n  }\n  /**\r\n   * Setup extended connection\r\n   */\n\n\n  browserAPI.runtime.onConnect.addListener(connectState);\n  /**\r\n   * Setup extended external connection\r\n   */\n\n  if (browserAPI.runtime.onConnectExternal) {\n    browserAPI.runtime.onConnectExternal.addListener(connectState);\n  } else {\n    console.warn('runtime.onConnectExternal is not supported');\n  }\n  /**\r\n   * Safety message to tabs for content scripts\r\n   */\n\n\n  browserAPI.tabs.query({}, function (tabs) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = tabs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var tab = _step.value;\n        browserAPI.tabs.sendMessage(tab.id, {\n          action: 'storeReady'\n        }, function () {\n          if (chrome.runtime.lastError) {// do nothing - errors can be present\n            // if no content script exists on reciever\n          }\n        });\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }); // For non-tab based\n  // TODO: Find use case for this. Ommiting until then.\n  // browserAPI.runtime.sendMessage(null, {action: 'storeReady'});\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = shallowDiff;\n\nvar _constants = require(\"../constants\");\n\n/**\r\n * Returns a new Object containing only the fields in `new` that differ from `old`\r\n *\r\n * @param {Object} old\r\n * @param {Object} new\r\n * @return {Array} An array of changes. The changes have a `key`, `value`, and `change`.\r\n *   The change is either `updated`, which is if the value has changed or been added,\r\n *   or `removed`.\r\n */\nfunction shallowDiff(oldObj, newObj) {\n  var difference = [];\n  Object.keys(newObj).forEach(function (key) {\n    if (oldObj[key] !== newObj[key]) {\n      difference.push({\n        key: key,\n        value: newObj[key],\n        change: _constants.DIFF_STATUS_UPDATED\n      });\n    }\n  });\n  Object.keys(oldObj).forEach(function (key) {\n    if (!newObj.hasOwnProperty(key)) {\n      difference.push({\n        key: key,\n        change: _constants.DIFF_STATUS_REMOVED\n      });\n    }\n  });\n  return difference;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\r\n * Simple middleware intercepts actions and replaces with\r\n * another by calling an alias function with the original action\r\n * @type {object} aliases an object that maps action types (keys) to alias functions (values) (e.g. { SOME_ACTION: newActionAliasFunc })\r\n */\nvar _default = function _default(aliases) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        var alias = aliases[action.type];\n\n        if (alias) {\n          return next(alias(action));\n        }\n\n        return next(action);\n      };\n    };\n  };\n};\n\nexports.default = _default;","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import { combineReducers } from 'redux';\n\nimport domContent from './domContent';\n\nexport default combineReducers({\n    domContent\n});\n","export default (state = {}, action) => {\n    // TODO: Add loggin middleware to replace console logs\n    // Currently these logs can be viewed at chrome://extensions in developer mode\n    console.log('action type = ', action.type)\n    console.log('action data = ', action.data)\n    switch (action.type) {\n      case 'SEND_DOM_CONTENT':\n        return action.data;\n      default:\n        return state;\n    }\n  };","import { createStore } from 'redux';\nimport rootReducer from './reducers';\n\nimport { wrapStore } from 'webext-redux';\n\nconst store = createStore(rootReducer, {});\n\nwrapStore(store);\n\nchrome.runtime.onInstalled.addListener(function() {\n  chrome.declarativeContent.onPageChanged.removeRules(undefined, function() {\n    chrome.declarativeContent.onPageChanged.addRules([\n      {\n        conditions: [\n          new chrome.declarativeContent.PageStateMatcher({\n            pageUrl: { hostContains: 'amazon.com' }\n          })\n        ],\n        actions: [new chrome.declarativeContent.ShowPageAction()]\n      }\n    ]);\n  });\n});\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n"],"sourceRoot":""}